                    case "expectedToolResult" -> {
                        // Check if the action result matches the expected value
                        // If both are strings, check if the actual result starts with the expected value
                        if (actionResult instanceof String actualString && expected.value instanceof String expectedString) {
                            yield actualString.startsWith(expectedString);
                        }
                        // Otherwise, use exact equality check
                        yield Objects.equals(actionResult, expected.value);
                    }
